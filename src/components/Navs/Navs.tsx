import './Navs.css';
import React, {useState} from "react";
import {Link, useLocation} from 'react-router-dom';
import {useAppDispatch} from "../../store/hooks";
import {displayMain} from "../Panel/panelReducer";
import {useGetActiveCategoriesNames} from "../../hooks/CategoryHooks";


export const Navs : React.FC = () => {
    const dispatch = useAppDispatch();
    const [isOpen, setIsOpen] = useState(false);
    const [timeOut, setTimeOut] = useState<NodeJS.Timeout>(() => setTimeout(() => null,0));
    const selectedCategories = useGetActiveCategoriesNames();
    const location = useLocation();

    const style = isOpen ? {} : {opacity: 0, height: 0, width: 0}

    return <nav onMouseEnter={() => {
                    setIsOpen(true)
                    clearTimeout(timeOut);
                }}
                onMouseLeave={() => setTimeOut(setTimeout(() => setIsOpen(false), 710))}>
        <div className="nav-btn nav-list">
            <svg width="30" height="15" viewBox="0 0 30 27" fill="none" xmlns="http://www.w3.org/2000/svg">
                <line y1="0.5" x2="30" y2="0.5" stroke="#a4a4a4" strokeWidth="3"/>
                <line y1="26.5" x2="30" y2="26.5" stroke="#a4a4a4" strokeWidth="3" />
                <line y1="13.5" x2="15" y2="13.5" stroke="#a4a4a4" strokeWidth="2" className="transitioning-line"/>
            </svg>
        </div>
        <div className="nav-navs" style={style}>
            <Link to={selectedCategories ? `/?categories=${selectedCategories.join('+')}` : '/'} className="nav-element" onClick={() => dispatch(displayMain())}>
                <div className="nav-btn nav-item">
                    <svg width="25" height="25" viewBox="0 0 14 13" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fillRule="evenodd" clipRule="evenodd" d="M7.35998 0.369995L13.3314 5.81568C13.5431 6.00867 13.5507 6.33929 13.3482 6.54181C13.1588 6.7312 12.8541 6.73863 12.6557 6.5587L12 5.964V12.49L11.5 12.99H8.49998L7.99998 12.49V8.99H5.99998V12.49L5.49998 12.99H2.49998L1.99998 12.49V5.972L1.35433 6.55826C1.15594 6.7384 0.851059 6.73106 0.661569 6.54157C0.459122 6.33913 0.466595 6.00868 0.677986 5.81559L6.63998 0.369995H7.35998ZM2.99998 5.063V11.99H4.99998V8.49L5.49998 7.99H8.49998L8.99998 8.49V11.99H11V5.057L6.99998 1.43L2.99998 5.063Z" fill="#a4a4a4"/>
                    </svg>
                </div>
                <p className="nav-label">Home</p>
            </Link>
            <Link to={location.pathname} className="nav-element">
                <div className="nav-btn nav-item">
                    <svg width="30" height="30" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path fillRule="evenodd" clipRule="evenodd" d="M11.4906 13.3344L5.901 2.82082C5.86888 2.76042 5.84898 2.69429 5.84242 2.62621C5.83587 2.55812 5.84279 2.48941 5.86279 2.424C5.90317 2.29189 5.99439 2.18124 6.11636 2.11639C6.23833 2.05154 6.38107 2.03779 6.51318 2.07818C6.57859 2.09818 6.63942 2.13086 6.6922 2.17437C6.74498 2.21788 6.78867 2.27136 6.82079 2.33175L12.4109 12.8453L13.2036 12.4234C13.4452 12.295 13.7097 12.2154 13.9821 12.1892C14.2545 12.163 14.5293 12.1907 14.791 12.2707C15.0527 12.3508 15.296 12.4816 15.5071 12.6557C15.7182 12.8298 15.8929 13.0438 16.0213 13.2854L16.3588 13.9198L19.9364 19.1568L12.5151 23.1026L10.1739 17.2078L9.83693 16.5734C9.70847 16.3318 9.62885 16.0673 9.60261 15.795C9.57638 15.5226 9.60405 15.2478 9.68405 14.9861C9.76404 14.7245 9.89479 14.4811 10.0688 14.27C10.2429 14.0589 10.4568 13.8841 10.6984 13.7557L11.4911 13.3344H11.4906ZM11.1869 14.6755L13.6921 13.3437C13.8129 13.2795 13.9452 13.2397 14.0814 13.2266C14.2175 13.2135 14.355 13.2273 14.4858 13.2673C14.6166 13.3073 14.7383 13.3727 14.8438 13.4597C14.9494 13.5467 15.0368 13.6537 15.101 13.7745L15.4385 14.4083L11.0932 16.7187L10.7562 16.0844C10.692 15.9636 10.6522 15.8313 10.639 15.6951C10.6259 15.559 10.6398 15.4215 10.6798 15.2907C10.7198 15.1599 10.7851 15.0382 10.8722 14.9327C10.9592 14.8271 11.0661 14.7397 11.1869 14.6755V14.6755ZM11.6192 18.0255L13.0531 21.6364L14.0083 21.1286L12.8807 18.9333L13.8078 18.4573L14.9286 20.6396L18.4192 18.7833L16.2276 15.575L11.6192 18.0255V18.0255Z" fill="#a4a4a4"/>
                        <path d="M8.52081 18.3494C8.57338 18.3057 8.63405 18.2727 8.69936 18.2524C8.76467 18.232 8.83335 18.2248 8.90147 18.231C8.96959 18.2372 9.03582 18.2568 9.09638 18.2886C9.15694 18.3204 9.21063 18.3638 9.25441 18.4164C9.29818 18.4689 9.33117 18.5296 9.3515 18.5949C9.37183 18.6602 9.37909 18.7289 9.37288 18.797C9.36666 18.8651 9.34709 18.9314 9.31528 18.9919C9.28347 19.0525 9.24004 19.1062 9.18748 19.15L9.18696 19.1505L9.18592 19.1515L9.18436 19.1526L9.17915 19.1567L9.16352 19.1698L9.10988 19.2109C9.06456 19.2448 9.0005 19.2911 8.91873 19.3463C8.75467 19.4557 8.51769 19.5984 8.21873 19.7411C7.44156 20.114 6.59113 20.3092 5.72915 20.3125C5.59101 20.3125 5.45854 20.2576 5.36086 20.1599C5.26319 20.0622 5.20831 19.9298 5.20831 19.7916C5.20831 19.6535 5.26319 19.521 5.36086 19.4233C5.45854 19.3257 5.59101 19.2708 5.72915 19.2708C6.43616 19.2674 7.13357 19.1068 7.77081 18.8005C7.96813 18.707 8.15854 18.5996 8.34061 18.4791C8.40055 18.4395 8.45909 18.3978 8.51613 18.3541L8.52133 18.3489V18.3494H8.52081Z" fill="#a4a4a4"/>
                        <path d="M10.1849 21.7875C10.2998 21.7108 10.3796 21.5916 10.4066 21.4562C10.4337 21.3207 10.4058 21.18 10.3292 21.0651C10.2525 20.9502 10.1333 20.8704 9.99785 20.8433C9.86237 20.8163 9.7217 20.8442 9.60677 20.9208L9.60573 20.9219L9.59531 20.9281L9.55052 20.9568C9.27936 21.1222 8.99788 21.27 8.70781 21.3995C8.15052 21.6463 7.4474 21.875 6.77083 21.875C6.6327 21.875 6.50022 21.9299 6.40255 22.0275C6.30487 22.1252 6.25 22.2577 6.25 22.3958C6.25 22.534 6.30487 22.6664 6.40255 22.7641C6.50022 22.8618 6.6327 22.9167 6.77083 22.9167C7.65729 22.9167 8.51563 22.6245 9.13073 22.351C9.46485 22.2022 9.78897 22.0319 10.101 21.8411C10.1209 21.8288 10.1407 21.8163 10.1604 21.8036L10.1771 21.7927L10.1823 21.7896L10.1849 21.7875V21.7875Z" fill="#a4a4a4"/>
                    </svg>
                </div>
                <p className="nav-label">Clean Filter</p>
            </Link>
            <Link to={'/configure' + (selectedCategories ? `?categories=${selectedCategories.join('+')}` : '')} className="nav-element">
                <div className="nav-btn nav-item">
                    <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.5694 7.63892C9.86109 7.63892 7.70831 9.79169 7.70831 12.5C7.70831 15.2084 9.86109 17.3611 12.5694 17.3611C15.2778 17.3611 17.4305 15.2084 17.4305 12.5C17.4305 9.79169 15.2778 7.63892 12.5694 7.63892ZM12.5694 15.9722C10.625 15.9722 9.0972 14.4445 9.0972 12.5C9.0972 10.5556 10.625 9.0278 12.5694 9.0278C14.5139 9.0278 16.0416 10.5556 16.0416 12.5C16.0416 14.4445 14.5139 15.9722 12.5694 15.9722Z" fill="#a4a4a4"/>
                        <path d="M22.7778 10.2084L20.8334 9.58336L20.4167 8.54169L21.3889 6.73614C21.5972 6.31947 21.5278 5.76392 21.1806 5.41669L19.5139 3.75003C19.1667 3.4028 18.6111 3.33336 18.1945 3.54169L16.3889 4.51392L15.3472 4.09725L14.7222 2.1528C14.5834 1.73614 14.1667 1.38892 13.6806 1.38892H11.3195C10.8334 1.38892 10.4167 1.73614 10.3472 2.22225L9.72225 4.16669C9.30558 4.23614 8.95836 4.37503 8.61114 4.58336L6.80558 3.61114C6.38892 3.4028 5.83336 3.47225 5.48614 3.81947L3.81947 5.48614C3.47225 5.83336 3.4028 6.38892 3.61114 6.80558L4.51392 8.54169C4.37503 8.88892 4.23614 9.30558 4.09725 9.6528L2.1528 10.2778C1.73614 10.4167 1.38892 10.8334 1.38892 11.3195V13.6806C1.38892 14.1667 1.73614 14.5834 2.22225 14.7222L4.16669 15.3472L4.58336 16.3889L3.61114 18.1945C3.4028 18.6111 3.47225 19.1667 3.81947 19.5139L5.48614 21.1806C5.83336 21.5278 6.38892 21.5972 6.80558 21.3889L8.61114 20.4167L9.6528 20.8334L10.2778 22.8472C10.4167 23.2639 10.8334 23.6111 11.3195 23.6111H13.6806C14.1667 23.6111 14.5834 23.2639 14.7222 22.8472L15.3472 20.8334L16.3889 20.4167L18.1945 21.3889C18.6111 21.5972 19.1667 21.5278 19.5139 21.1806L21.1806 19.5139C21.5278 19.1667 21.5972 18.6111 21.3889 18.1945L20.4167 16.3889L20.8334 15.3472L22.8472 14.7222C23.2639 14.5834 23.6111 14.1667 23.6111 13.6806V11.3195C23.6111 10.8334 23.2639 10.3472 22.7778 10.2084V10.2084ZM22.2222 13.4722L19.7222 14.2361L19.6528 14.5834L19.0278 16.0417L18.8195 16.3889L20.0695 18.6806L18.6806 20.0695L16.3889 18.8195L16.0417 19.0278C15.5556 19.3056 15.0695 19.5139 14.5834 19.6528L14.2361 19.7222L13.4722 22.2222H11.5278L10.7639 19.7222L10.4167 19.6528L8.95836 19.0278L8.61114 18.8195L6.31947 20.0695L4.93058 18.6806L6.18058 16.3889L5.97225 16.0417C5.69447 15.5556 5.48614 15.0695 5.34725 14.5834L5.2778 14.2361L2.7778 13.4722V11.5278L5.13892 10.8334L5.2778 10.4861C5.41669 9.93058 5.62503 9.44447 5.9028 8.95836L6.11114 8.61114L4.93058 6.31947L6.31947 4.93058L8.54169 6.18058L8.88892 5.97225C9.37503 5.69447 9.86114 5.48614 10.4167 5.34725L10.7639 5.20836L11.5278 2.7778H13.4722L14.2361 5.20836L14.5834 5.34725C15.0695 5.48614 15.5556 5.69447 16.0417 5.97225L16.3889 6.18058L18.6806 4.93058L20.0695 6.31947L18.8195 8.61114L19.0278 8.95836C19.3056 9.44447 19.5139 9.93058 19.6528 10.4167L19.7222 10.7639L22.2222 11.5278V13.4722V13.4722Z" fill="#a4a4a4"/>
                    </svg>
                </div>
                <div className="nav-label"><p>Configure</p></div>
            </Link>
        </div>
    </nav>
}